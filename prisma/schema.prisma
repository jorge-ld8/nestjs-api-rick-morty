generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Category {
  category_id   Int           @id @default(autoincrement())
  name          String        @db.VarChar(100)
  subcategories Subcategory[]

  @@map("categories")
}

model Subcategory {
  subcategory_id Int         @id @default(autoincrement())
  name           String      @db.VarChar(100)
  category_id    Int
  Characters     Character[]
  Episodes       Episode[]
  category       Category    @relation(fields: [category_id], references: [category_id])

  @@map("subcategories")
}

model Episode {
  name         String      @db.VarChar(200)
  length       Int         
  airDate      DateTime   
  status_id    Int
  season_id    Int
  episode_code String      @db.VarChar(100)
  episode_id   Int         @id @default(autoincrement())
  Season       Subcategory @relation(fields: [season_id], references: [subcategory_id])
  Status       Status      @relation(fields: [status_id], references: [status_id])

  @@map("episodes")
}

model Character {
  character_id Int         @id @default(autoincrement())
  name         String      @db.VarChar(200)
  type         String?      @db.VarChar(100)
  status_id    Int
  specie_id    Int
  Specie       Subcategory @relation(fields: [specie_id], references: [subcategory_id])
  Status       Status      @relation(fields: [status_id], references: [status_id])

  @@map("characters")
}

model Character_Episode {
  character_episode_id Int    @id @default(autoincrement())
  character_id         Int
  episode_id           Int
  start_time           String
  end_time             String

  @@map("characters_episodes")
}

model Status_Type {
  status_type_id Int      @id @default(autoincrement())
  value          String
  status         Status[]

  @@map("status_types")
}

model Status {
  status_id      Int         @id @default(autoincrement())
  value          String
  status_type_id Int
  characters     Character[]
  episodes       Episode[]
  status_type    Status_Type @relation(fields: [status_type_id], references: [status_type_id])
  @@map("status")
}
